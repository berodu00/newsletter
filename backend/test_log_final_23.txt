
> Task :compileJava
D:\berodu\SORIN\project\Newsletter\backend\src\main\java\com\kz\magazine\entity\Content.java:90: warning: @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
    private Long ratingCount = 0L;
                 ^
D:\berodu\SORIN\project\Newsletter\backend\src\main\java\com\kz\magazine\entity\Content.java:91: warning: @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
    private Long ratingSum = 0L;
                 ^
D:\berodu\SORIN\project\Newsletter\backend\src\main\java\com\kz\magazine\entity\Content.java:92: warning: @Builder will ignore the initializing expression entirely. If you want the initializing expression to serve as default, add @Builder.Default. If it is not supposed to be settable during building, make the field final.
    private BigDecimal averageRating = BigDecimal.ZERO;
                       ^
3 warnings

> Task :processResources UP-TO-DATE
> Task :classes
> Task :compileTestJava
> Task :processTestResources NO-SOURCE
> Task :testClasses

> Task :test

MagazineApplicationTests STANDARD_OUT
    09:56:42.621 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.kz.magazine.MagazineApplicationTests]: MagazineApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    09:56:42.881 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.MagazineApplicationTests

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:56:44.349+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.MagazineApplicationTests   : Starting MagazineApplicationTests using Java 17.0.13 with PID 20248 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:56:44.351+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.MagazineApplicationTests   : No active profile set, falling back to 1 default profile: "default"
    2025-12-26T09:56:48.037+09:00  INFO 20248 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
    2025-12-26T09:56:48.342+09:00  INFO 20248 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 248 ms. Found 10 JPA repository interfaces.
    2025-12-26T09:56:49.931+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
    2025-12-26T09:56:51.313+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@427308f8
    2025-12-26T09:56:51.317+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
    2025-12-26T09:56:52.007+09:00  INFO 20248 --- [    Test worker] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.22.3 by Redgate
    2025-12-26T09:56:52.007+09:00  INFO 20248 --- [    Test worker] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi
    2025-12-26T09:56:52.007+09:00  INFO 20248 --- [    Test worker] o.f.c.internal.license.VersionPrinter    : 
    2025-12-26T09:56:52.314+09:00  INFO 20248 --- [    Test worker] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/kz_magazine (PostgreSQL 15.15)
    2025-12-26T09:56:53.315+09:00  INFO 20248 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 5
    2025-12-26T09:56:53.346+09:00  INFO 20248 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Schema "public" is up to date. No migration necessary.
    2025-12-26T09:56:53.665+09:00  INFO 20248 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
    2025-12-26T09:56:53.852+09:00  INFO 20248 --- [    Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final
    2025-12-26T09:56:53.942+09:00  INFO 20248 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
    2025-12-26T09:56:54.589+09:00  INFO 20248 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
    2025-12-26T09:56:57.302+09:00  INFO 20248 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
    2025-12-26T09:56:57.311+09:00  INFO 20248 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
    2025-12-26T09:56:58.131+09:00  INFO 20248 --- [    Test worker] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
    2025-12-26T09:57:00.659+09:00  WARN 20248 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
    2025-12-26T09:57:00.729+09:00  WARN 20248 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : 

    Using generated security password: 08b593da-d7cb-4db0-9727-afa393b0302b

    This generated password is for development use only. Your security configuration must be updated before running your application in production.

    2025-12-26T09:57:01.519+09:00  INFO 20248 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6a8a54f5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4623c0d3, org.springframework.security.web.context.SecurityContextHolderFilter@75044df3, org.springframework.security.web.header.HeaderWriterFilter@28f33810, org.springframework.web.filter.CorsFilter@7c7335dc, org.springframework.security.web.authentication.logout.LogoutFilter@34ceefb5, com.kz.magazine.security.JwtAuthenticationFilter@3095e9c6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2c66be14, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2e78213c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8802edd, org.springframework.security.web.session.SessionManagementFilter@290964bd, org.springframework.security.web.access.ExceptionTranslationFilter@64078e6a, org.springframework.security.web.access.intercept.AuthorizationFilter@1ea6446b]
    2025-12-26T09:57:02.789+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.MagazineApplicationTests   : Started MagazineApplicationTests in 19.486 seconds (process running for 22.959)

OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended

> Task :test

MagazineApplicationTests > contextLoads() PASSED

ContentApiTest STANDARD_OUT
    2025-12-26T09:57:04.201+09:00  INFO 20248 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.kz.magazine.controller.ContentApiTest]: ContentApiTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    2025-12-26T09:57:04.351+09:00  INFO 20248 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.controller.ContentApiTest

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:57:04.457+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.controller.ContentApiTest  : Starting ContentApiTest using Java 17.0.13 with PID 20248 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:57:04.457+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.controller.ContentApiTest  : No active profile set, falling back to 1 default profile: "default"
    2025-12-26T09:57:08.451+09:00  WARN 20248 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : 

    Using generated security password: a0874c8c-4977-47c2-8554-376393e1aad4

    This generated password is for development use only. Your security configuration must be updated before running your application in production.

    2025-12-26T09:57:08.584+09:00  INFO 20248 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1d8deb33, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@159e7734, org.springframework.security.web.context.SecurityContextHolderFilter@1bf64e55, org.springframework.security.web.header.HeaderWriterFilter@67c6b166, org.springframework.web.filter.CorsFilter@364178de, org.springframework.security.web.csrf.CsrfFilter@287c4e96, org.springframework.security.web.authentication.logout.LogoutFilter@315203b1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6d9f78a6, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5710598e, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@26a8eaaa, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@b536551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@51b4ab43, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@50f95c8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@540e593f, org.springframework.security.web.access.ExceptionTranslationFilter@53b0fbf6, org.springframework.security.web.access.intercept.AuthorizationFilter@13389f4e]
    2025-12-26T09:57:08.841+09:00  INFO 20248 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
    2025-12-26T09:57:08.842+09:00  INFO 20248 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
    2025-12-26T09:57:08.843+09:00  INFO 20248 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
    2025-12-26T09:57:08.877+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.controller.ContentApiTest  : Started ContentApiTest in 4.505 seconds (process running for 29.047)

ContentApiTest > Get Contents List - Success STANDARD_OUT
    2025-12-26T09:57:09.251+09:00  WARN 20248 --- [    Test worker] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/contents' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.

ContentApiTest > Get Contents List - Success PASSED

ContentApiTest > Get Content Detail - Success PASSED

ContentApiTest > Delete Content - Success PASSED

ContentApiTest > Create Content - Success PASSED

ContentApiTest > Update Content - Success PASSED

EventApiTest STANDARD_OUT
    2025-12-26T09:57:11.637+09:00  INFO 20248 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.kz.magazine.controller.EventApiTest]: EventApiTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    2025-12-26T09:57:11.679+09:00  INFO 20248 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.controller.EventApiTest

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:57:11.874+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.controller.EventApiTest    : Starting EventApiTest using Java 17.0.13 with PID 20248 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:57:11.878+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.controller.EventApiTest    : The following 1 profile is active: "test"
    2025-12-26T09:57:13.878+09:00  INFO 20248 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
    2025-12-26T09:57:14.088+09:00  INFO 20248 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 209 ms. Found 10 JPA repository interfaces.
    2025-12-26T09:57:15.557+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
    2025-12-26T09:57:16.287+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@512542aa
    2025-12-26T09:57:16.288+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
    2025-12-26T09:57:16.332+09:00  INFO 20248 --- [    Test worker] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/kz_magazine (PostgreSQL 15.15)
    2025-12-26T09:57:17.063+09:00  INFO 20248 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 5
    2025-12-26T09:57:17.094+09:00  INFO 20248 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Schema "public" is up to date. No migration necessary.
    2025-12-26T09:57:17.233+09:00  INFO 20248 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
    2025-12-26T09:57:17.240+09:00  INFO 20248 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
    2025-12-26T09:57:17.246+09:00  INFO 20248 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
    2025-12-26T09:57:19.102+09:00  INFO 20248 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
    2025-12-26T09:57:19.103+09:00  INFO 20248 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
    2025-12-26T09:57:20.046+09:00  WARN 20248 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
    2025-12-26T09:57:20.161+09:00  WARN 20248 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : 

    Using generated security password: 61813f9f-c245-47ae-bd4a-270361b3f635

    This generated password is for development use only. Your security configuration must be updated before running your application in production.

    2025-12-26T09:57:20.314+09:00  INFO 20248 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@8039274, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@126aaaa5, org.springframework.security.web.context.SecurityContextHolderFilter@3d34b11c, org.springframework.security.web.header.HeaderWriterFilter@3ae14048, org.springframework.web.filter.CorsFilter@6561629, org.springframework.security.web.authentication.logout.LogoutFilter@263121b, com.kz.magazine.security.JwtAuthenticationFilter@26156929, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@448f656, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@341b1597, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3291cfad, org.springframework.security.web.session.SessionManagementFilter@7fda2507, org.springframework.security.web.access.ExceptionTranslationFilter@4b2e5d79, org.springframework.security.web.access.intercept.AuthorizationFilter@2d01bc46]
    2025-12-26T09:57:20.548+09:00  INFO 20248 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
    2025-12-26T09:57:20.548+09:00  INFO 20248 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
    2025-12-26T09:57:20.549+09:00  INFO 20248 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
    2025-12-26T09:57:20.567+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.controller.EventApiTest    : Started EventApiTest in 8.872 seconds (process running for 40.737)

EventApiTest > Admin can create event STANDARD_OUT
    2025-12-26T09:57:21.062+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        select
            ep1_0.participant_id,
            ep1_0.comment,
            ep1_0.event_id,
            ep1_0.is_winner,
            ep1_0.participated_at,
            ep1_0.user_id 
        from
            event_participants ep1_0
    2025-12-26T09:57:21.161+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        select
            e1_0.event_id,
            e1_0.created_at,
            e1_0.created_by,
            e1_0.deleted_at,
            e1_0.deleted_by,
            e1_0.description,
            e1_0.end_at,
            e1_0.start_at,
            e1_0.status,
            e1_0.thumbnail_file_id,
            e1_0.title,
            e1_0.updated_at,
            e1_0.updated_by 
        from
            events e1_0
    2025-12-26T09:57:21.184+09:00  WARN 20248 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42703
    2025-12-26T09:57:21.184+09:00 ERROR 20248 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: column e1_0.updated_by does not exist
      Hint: Perhaps you meant to reference the column "e1_0.updated_at".
      Position: 191

EventApiTest > Admin can create event FAILED
    org.springframework.dao.InvalidDataAccessResourceUsageException at EventApiTest.java:56
        Caused by: org.hibernate.exception.SQLGrammarException at EventApiTest.java:56
            Caused by: org.postgresql.util.PSQLException at EventApiTest.java:56

EventApiTest > Admin can draw winners STANDARD_OUT
    2025-12-26T09:57:21.219+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        select
            ep1_0.participant_id,
            ep1_0.comment,
            ep1_0.event_id,
            ep1_0.is_winner,
            ep1_0.participated_at,
            ep1_0.user_id 
        from
            event_participants ep1_0
    2025-12-26T09:57:21.314+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        select
            e1_0.event_id,
            e1_0.created_at,
            e1_0.created_by,
            e1_0.deleted_at,
            e1_0.deleted_by,
            e1_0.description,
            e1_0.end_at,
            e1_0.start_at,
            e1_0.status,
            e1_0.thumbnail_file_id,
            e1_0.title,
            e1_0.updated_at,
            e1_0.updated_by 
        from
            events e1_0
    2025-12-26T09:57:21.320+09:00  WARN 20248 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42703
    2025-12-26T09:57:21.320+09:00 ERROR 20248 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: column e1_0.updated_by does not exist
      Hint: Perhaps you meant to reference the column "e1_0.updated_at".
      Position: 191

EventApiTest > Admin can draw winners FAILED
    org.springframework.dao.InvalidDataAccessResourceUsageException at EventApiTest.java:56
        Caused by: org.hibernate.exception.SQLGrammarException at EventApiTest.java:56
            Caused by: org.postgresql.util.PSQLException at EventApiTest.java:56

EventApiTest > User can participate in event STANDARD_OUT
    2025-12-26T09:57:21.333+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        select
            ep1_0.participant_id,
            ep1_0.comment,
            ep1_0.event_id,
            ep1_0.is_winner,
            ep1_0.participated_at,
            ep1_0.user_id 
        from
            event_participants ep1_0
    2025-12-26T09:57:21.358+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        select
            e1_0.event_id,
            e1_0.created_at,
            e1_0.created_by,
            e1_0.deleted_at,
            e1_0.deleted_by,
            e1_0.description,
            e1_0.end_at,
            e1_0.start_at,
            e1_0.status,
            e1_0.thumbnail_file_id,
            e1_0.title,
            e1_0.updated_at,
            e1_0.updated_by 
        from
            events e1_0
    2025-12-26T09:57:21.369+09:00  WARN 20248 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42703
    2025-12-26T09:57:21.369+09:00 ERROR 20248 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: column e1_0.updated_by does not exist
      Hint: Perhaps you meant to reference the column "e1_0.updated_at".
      Position: 191

EventApiTest > User can participate in event FAILED
    org.springframework.dao.InvalidDataAccessResourceUsageException at EventApiTest.java:56
        Caused by: org.hibernate.exception.SQLGrammarException at EventApiTest.java:56
            Caused by: org.postgresql.util.PSQLException at EventApiTest.java:56

FileApiTest STANDARD_OUT
    2025-12-26T09:57:21.387+09:00  INFO 20248 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.kz.magazine.controller.FileApiTest]: FileApiTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    2025-12-26T09:57:21.399+09:00  INFO 20248 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.controller.FileApiTest

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:57:21.506+09:00  INFO 20248 --- [    Test worker] com.kz.magazine.controller.FileApiTest   : Starting FileApiTest using Java 17.0.13 with PID 20248 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:57:21.510+09:00  INFO 20248 --- [    Test worker] com.kz.magazine.controller.FileApiTest   : No active profile set, falling back to 1 default profile: "default"
    2025-12-26T09:57:22.415+09:00  WARN 20248 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : 

    Using generated security password: 60cea255-9330-46c9-9a8e-c08d82e8fa3c

    This generated password is for development use only. Your security configuration must be updated before running your application in production.

    2025-12-26T09:57:22.420+09:00  INFO 20248 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2554d217, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@95a02c0, org.springframework.security.web.context.SecurityContextHolderFilter@2eac7950, org.springframework.security.web.header.HeaderWriterFilter@50e31126, org.springframework.web.filter.CorsFilter@787b688a, org.springframework.security.web.csrf.CsrfFilter@37826951, org.springframework.security.web.authentication.logout.LogoutFilter@786ce57e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@260aeb5a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3d26e7ba, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@44988600, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4f6e663b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@a404535, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7584b20d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@475f30ee, org.springframework.security.web.access.ExceptionTranslationFilter@6e12352d, org.springframework.security.web.access.intercept.AuthorizationFilter@3952be1b]
    2025-12-26T09:57:22.431+09:00  INFO 20248 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
    2025-12-26T09:57:22.432+09:00  INFO 20248 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
    2025-12-26T09:57:22.432+09:00  INFO 20248 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
    2025-12-26T09:57:22.439+09:00  INFO 20248 --- [    Test worker] com.kz.magazine.controller.FileApiTest   : Started FileApiTest in 1.037 seconds (process running for 42.609)

FileApiTest > Upload File - Success STANDARD_OUT
    2025-12-26T09:57:22.490+09:00  WARN 20248 --- [    Test worker] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/files/upload' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.

FileApiTest > Upload File - Success PASSED

RepositoryTest STANDARD_OUT
    2025-12-26T09:57:22.519+09:00  INFO 20248 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.kz.magazine.repository.RepositoryTest]: RepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    2025-12-26T09:57:22.569+09:00  INFO 20248 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.repository.RepositoryTest

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:57:22.634+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.repository.RepositoryTest  : Starting RepositoryTest using Java 17.0.13 with PID 20248 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:57:22.634+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.repository.RepositoryTest  : No active profile set, falling back to 1 default profile: "default"
    2025-12-26T09:57:22.795+09:00  INFO 20248 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
    2025-12-26T09:57:22.830+09:00  INFO 20248 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 10 JPA repository interfaces.
    2025-12-26T09:57:22.938+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
    2025-12-26T09:57:23.140+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@70602f49
    2025-12-26T09:57:23.140+09:00  INFO 20248 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
    2025-12-26T09:57:23.181+09:00  INFO 20248 --- [    Test worker] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/kz_magazine (PostgreSQL 15.15)
    2025-12-26T09:57:23.356+09:00  INFO 20248 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 5
    2025-12-26T09:57:23.363+09:00  INFO 20248 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Schema "public" is up to date. No migration necessary.
    2025-12-26T09:57:23.389+09:00  INFO 20248 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
    2025-12-26T09:57:23.394+09:00  INFO 20248 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
    2025-12-26T09:57:23.402+09:00  INFO 20248 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
    2025-12-26T09:57:23.754+09:00  INFO 20248 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
    2025-12-26T09:57:23.755+09:00  INFO 20248 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
    2025-12-26T09:57:24.004+09:00  INFO 20248 --- [    Test worker] c.kz.magazine.repository.RepositoryTest  : Started RepositoryTest in 1.421 seconds (process running for 44.175)

RepositoryTest > Content Repository Mapping Test STANDARD_OUT
    2025-12-26T09:57:24.040+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        select
            c1_0.category_id,
            c1_0.category_name,
            c1_0.created_at,
            c1_0.created_by,
            c1_0.display_order,
            c1_0.is_active,
            c1_0.updated_at,
            c1_0.updated_by 
        from
            categories c1_0 
        where
            c1_0.category_name=?
    Hibernate: 
        select
            c1_0.category_id,
            c1_0.category_name,
            c1_0.created_at,
            c1_0.created_by,
            c1_0.display_order,
            c1_0.is_active,
            c1_0.updated_at,
            c1_0.updated_by 
        from
            categories c1_0 
        where
            c1_0.category_name=?
    2025-12-26T09:57:24.083+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        select
            u1_0.user_id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.department,
            u1_0.email,
            u1_0.is_active,
            u1_0.name,
            u1_0.role,
            u1_0.updated_at,
            u1_0.updated_by,
            u1_0.username 
        from
            users u1_0 
        where
            u1_0.username=?
    Hibernate: 
        select
            u1_0.user_id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.department,
            u1_0.email,
            u1_0.is_active,
            u1_0.name,
            u1_0.role,
            u1_0.updated_at,
            u1_0.updated_by,
            u1_0.username 
        from
            users u1_0 
        where
            u1_0.username=?
    2025-12-26T09:57:24.147+09:00 DEBUG 20248 --- [    Test worker] org.hibernate.SQL                        : 
        insert 
        into
            contents
            (author_id, average_rating, body_html, body_text, category_id, created_at, deleted_at, deleted_by, instagram_url, published_at, rating_count, rating_sum, status, summary, thumbnail_file_id, title, updated_at, view_count, youtube_url) 
        values
            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    Hibernate: 
        insert 
        into
            contents
            (author_id, average_rating, body_html, body_text, category_id, created_at, deleted_at, deleted_by, instagram_url, published_at, rating_count, rating_sum, status, summary, thumbnail_file_id, title, updated_at, view_count, youtube_url) 
        values
            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)

RepositoryTest > Content Repository Mapping Test PASSED

AuditLogServiceTest > logAction_Success() PASSED

ContentViewServiceTest > incrementViewCount_Deduped() PASSED

ContentViewServiceTest > incrementViewCount_Success() PASSED

EventServiceTest > Draw winners should select random participants PASSED

EventServiceTest > Duplicate participation should fail PASSED

ReactionServiceTest > toggleLike_AddLike() PASSED

ReactionServiceTest > toggleLike_RemoveLike() PASSED

HtmlSanitizerTest > Should allow valid links but enforce nofollow PASSED

HtmlSanitizerTest > Should remove script tags PASSED

HtmlSanitizerTest > Should allow safe tags and attributes PASSED

HtmlSanitizerTest > Should allow Youtube iframe PASSED

2025-12-26T09:57:25.334+09:00  INFO 20248 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T09:57:25.336+09:00  INFO 20248 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-26T09:57:25.340+09:00  INFO 20248 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-26T09:57:25.349+09:00  INFO 20248 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T09:57:25.350+09:00  INFO 20248 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-12-26T09:57:25.407+09:00  INFO 20248 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-12-26T09:57:25.411+09:00  INFO 20248 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T09:57:25.414+09:00  INFO 20248 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-12-26T09:57:25.431+09:00  INFO 20248 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.

> Task :test FAILED

22 tests completed, 3 failed

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':test'.
> There were failing tests. See the report at: file:///D:/berodu/SORIN/project/Newsletter/backend/build/reports/tests/test/index.html

* Try:
> Run with --scan to get full insights.

Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.

You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.

For more on this, please refer to https://docs.gradle.org/8.5/userguide/command_line_interface.html#sec:command_line_warnings in the Gradle documentation.

BUILD FAILED in 54s
4 actionable tasks: 3 executed, 1 up-to-date
