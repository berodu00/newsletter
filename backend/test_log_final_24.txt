> Task :compileJava
> Task :processResources
> Task :classes
> Task :compileTestJava UP-TO-DATE
> Task :processTestResources NO-SOURCE
> Task :testClasses UP-TO-DATE

> Task :test

EventApiTest STANDARD_OUT
    09:58:30.184 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.kz.magazine.controller.EventApiTest]: EventApiTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    09:58:30.438 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.controller.EventApiTest

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:58:31.517+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.controller.EventApiTest    : Starting EventApiTest using Java 17.0.13 with PID 19484 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:58:31.519+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.controller.EventApiTest    : The following 1 profile is active: "test"
    2025-12-26T09:58:33.061+09:00  INFO 19484 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
    2025-12-26T09:58:33.243+09:00  INFO 19484 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 170 ms. Found 10 JPA repository interfaces.
    2025-12-26T09:58:34.243+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
    2025-12-26T09:58:34.722+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1216eb3f
    2025-12-26T09:58:34.725+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
    2025-12-26T09:58:34.902+09:00  INFO 19484 --- [    Test worker] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.22.3 by Redgate
    2025-12-26T09:58:34.902+09:00  INFO 19484 --- [    Test worker] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi
    2025-12-26T09:58:34.902+09:00  INFO 19484 --- [    Test worker] o.f.c.internal.license.VersionPrinter    : 
    2025-12-26T09:58:35.006+09:00  INFO 19484 --- [    Test worker] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/kz_magazine (PostgreSQL 15.15)
    2025-12-26T09:58:35.338+09:00  INFO 19484 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 5
    2025-12-26T09:58:35.390+09:00  INFO 19484 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "6 - add updated by to events"
    2025-12-26T09:58:35.494+09:00  INFO 19484 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Successfully applied 1 migration to schema "public", now at version v6 (execution time 00:00.068s)
    2025-12-26T09:58:35.757+09:00  INFO 19484 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
    2025-12-26T09:58:35.879+09:00  INFO 19484 --- [    Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final
    2025-12-26T09:58:35.971+09:00  INFO 19484 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
    2025-12-26T09:58:36.559+09:00  INFO 19484 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
    2025-12-26T09:58:38.706+09:00  INFO 19484 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
    2025-12-26T09:58:38.709+09:00  INFO 19484 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
    2025-12-26T09:58:39.315+09:00  INFO 19484 --- [    Test worker] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
    2025-12-26T09:58:41.070+09:00  WARN 19484 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
    2025-12-26T09:58:41.132+09:00  WARN 19484 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : 

    Using generated security password: 0b3fb28f-5386-45ea-bdf4-328c7dd9a153

    This generated password is for development use only. Your security configuration must be updated before running your application in production.

    2025-12-26T09:58:42.872+09:00  INFO 19484 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2aa143ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7abe3d53, org.springframework.security.web.context.SecurityContextHolderFilter@2c05ccdb, org.springframework.security.web.header.HeaderWriterFilter@55145dc5, org.springframework.web.filter.CorsFilter@372dc92e, org.springframework.security.web.authentication.logout.LogoutFilter@7aeb7bd6, com.kz.magazine.security.JwtAuthenticationFilter@a885aa1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5891bd6d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6050d04d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a9464d9, org.springframework.security.web.session.SessionManagementFilter@34a8a5ad, org.springframework.security.web.access.ExceptionTranslationFilter@784dd9da, org.springframework.security.web.access.intercept.AuthorizationFilter@f2bec99]
    2025-12-26T09:58:44.329+09:00  INFO 19484 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
    2025-12-26T09:58:44.329+09:00  INFO 19484 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
    2025-12-26T09:58:44.331+09:00  INFO 19484 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 2 ms
    2025-12-26T09:58:44.411+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.controller.EventApiTest    : Started EventApiTest in 13.757 seconds (process running for 16.198)

OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended

> Task :test

EventApiTest > Admin can create event STANDARD_OUT
    2025-12-26T09:58:46.172+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            ep1_0.participant_id,
            ep1_0.comment,
            ep1_0.event_id,
            ep1_0.is_winner,
            ep1_0.participated_at,
            ep1_0.user_id 
        from
            event_participants ep1_0
    2025-12-26T09:58:46.239+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            e1_0.event_id,
            e1_0.created_at,
            e1_0.created_by,
            e1_0.deleted_at,
            e1_0.deleted_by,
            e1_0.description,
            e1_0.end_at,
            e1_0.start_at,
            e1_0.status,
            e1_0.thumbnail_file_id,
            e1_0.title,
            e1_0.updated_at,
            e1_0.updated_by 
        from
            events e1_0
    2025-12-26T09:58:46.599+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            u1_0.user_id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.department,
            u1_0.email,
            u1_0.is_active,
            u1_0.name,
            u1_0.role,
            u1_0.updated_at,
            u1_0.updated_by,
            u1_0.username 
        from
            users u1_0
    2025-12-26T09:58:46.865+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        insert 
        into
            users
            (created_at, created_by, department, email, is_active, name, role, updated_at, updated_by, username) 
        values
            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    2025-12-26T09:58:46.890+09:00  WARN 19484 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 23505
    2025-12-26T09:58:46.890+09:00 ERROR 19484 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: duplicate key value violates unique constraint "users_username_key"
      Detail: Key (username)=(admin) already exists.

EventApiTest > Admin can create event FAILED
    org.springframework.dao.DataIntegrityViolationException at EventApiTest.java:60
        Caused by: org.hibernate.exception.ConstraintViolationException at EventApiTest.java:60
            Caused by: org.postgresql.util.PSQLException at EventApiTest.java:60

EventApiTest > Admin can draw winners STANDARD_OUT
    2025-12-26T09:58:46.983+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            ep1_0.participant_id,
            ep1_0.comment,
            ep1_0.event_id,
            ep1_0.is_winner,
            ep1_0.participated_at,
            ep1_0.user_id 
        from
            event_participants ep1_0
    2025-12-26T09:58:47.140+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            e1_0.event_id,
            e1_0.created_at,
            e1_0.created_by,
            e1_0.deleted_at,
            e1_0.deleted_by,
            e1_0.description,
            e1_0.end_at,
            e1_0.start_at,
            e1_0.status,
            e1_0.thumbnail_file_id,
            e1_0.title,
            e1_0.updated_at,
            e1_0.updated_by 
        from
            events e1_0
    2025-12-26T09:58:47.196+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            u1_0.user_id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.department,
            u1_0.email,
            u1_0.is_active,
            u1_0.name,
            u1_0.role,
            u1_0.updated_at,
            u1_0.updated_by,
            u1_0.username 
        from
            users u1_0
    2025-12-26T09:58:47.270+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        insert 
        into
            users
            (created_at, created_by, department, email, is_active, name, role, updated_at, updated_by, username) 
        values
            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    2025-12-26T09:58:47.423+09:00  WARN 19484 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 23505
    2025-12-26T09:58:47.424+09:00 ERROR 19484 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: duplicate key value violates unique constraint "users_username_key"
      Detail: Key (username)=(admin) already exists.

EventApiTest > Admin can draw winners FAILED
    org.springframework.dao.DataIntegrityViolationException at EventApiTest.java:60
        Caused by: org.hibernate.exception.ConstraintViolationException at EventApiTest.java:60
            Caused by: org.postgresql.util.PSQLException at EventApiTest.java:60

EventApiTest > User can participate in event STANDARD_OUT
    2025-12-26T09:58:47.480+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            ep1_0.participant_id,
            ep1_0.comment,
            ep1_0.event_id,
            ep1_0.is_winner,
            ep1_0.participated_at,
            ep1_0.user_id 
        from
            event_participants ep1_0
    2025-12-26T09:58:47.658+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            e1_0.event_id,
            e1_0.created_at,
            e1_0.created_by,
            e1_0.deleted_at,
            e1_0.deleted_by,
            e1_0.description,
            e1_0.end_at,
            e1_0.start_at,
            e1_0.status,
            e1_0.thumbnail_file_id,
            e1_0.title,
            e1_0.updated_at,
            e1_0.updated_by 
        from
            events e1_0
    2025-12-26T09:58:47.708+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            u1_0.user_id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.department,
            u1_0.email,
            u1_0.is_active,
            u1_0.name,
            u1_0.role,
            u1_0.updated_at,
            u1_0.updated_by,
            u1_0.username 
        from
            users u1_0
    2025-12-26T09:58:47.771+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        insert 
        into
            users
            (created_at, created_by, department, email, is_active, name, role, updated_at, updated_by, username) 
        values
            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    2025-12-26T09:58:47.828+09:00  WARN 19484 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 23505
    2025-12-26T09:58:47.828+09:00 ERROR 19484 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: duplicate key value violates unique constraint "users_username_key"
      Detail: Key (username)=(admin) already exists.

EventApiTest > User can participate in event FAILED
    org.springframework.dao.DataIntegrityViolationException at EventApiTest.java:60
        Caused by: org.hibernate.exception.ConstraintViolationException at EventApiTest.java:60
            Caused by: org.postgresql.util.PSQLException at EventApiTest.java:60

MagazineApplicationTests STANDARD_OUT
    2025-12-26T09:58:47.886+09:00  INFO 19484 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.kz.magazine.MagazineApplicationTests]: MagazineApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    2025-12-26T09:58:47.891+09:00  INFO 19484 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.MagazineApplicationTests

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:58:47.922+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.MagazineApplicationTests   : Starting MagazineApplicationTests using Java 17.0.13 with PID 19484 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:58:47.922+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.MagazineApplicationTests   : No active profile set, falling back to 1 default profile: "default"
    2025-12-26T09:58:49.003+09:00  INFO 19484 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
    2025-12-26T09:58:49.082+09:00  INFO 19484 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79 ms. Found 10 JPA repository interfaces.
    2025-12-26T09:58:49.622+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
    2025-12-26T09:58:50.009+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@5b293cc9
    2025-12-26T09:58:50.010+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
    2025-12-26T09:58:50.040+09:00  INFO 19484 --- [    Test worker] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/kz_magazine (PostgreSQL 15.15)
    2025-12-26T09:58:50.233+09:00  INFO 19484 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 6
    2025-12-26T09:58:50.239+09:00  INFO 19484 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Schema "public" is up to date. No migration necessary.
    2025-12-26T09:58:50.273+09:00  INFO 19484 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
    2025-12-26T09:58:50.277+09:00  INFO 19484 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
    2025-12-26T09:58:50.289+09:00  INFO 19484 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
    2025-12-26T09:58:50.787+09:00  INFO 19484 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
    2025-12-26T09:58:50.788+09:00  INFO 19484 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
    2025-12-26T09:58:51.805+09:00  WARN 19484 --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
    2025-12-26T09:58:51.811+09:00  WARN 19484 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : 

    Using generated security password: a868690b-9f49-475a-8436-2fd7d8b4166d

    This generated password is for development use only. Your security configuration must be updated before running your application in production.

    2025-12-26T09:58:52.023+09:00  INFO 19484 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24094ed1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ca55391, org.springframework.security.web.context.SecurityContextHolderFilter@77e37e59, org.springframework.security.web.header.HeaderWriterFilter@51c7dfd, org.springframework.web.filter.CorsFilter@1a2fca7f, org.springframework.security.web.authentication.logout.LogoutFilter@301d1d3c, com.kz.magazine.security.JwtAuthenticationFilter@30a816b8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4cbb217e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2aae4e81, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e39a9ba, org.springframework.security.web.session.SessionManagementFilter@66e1ac9, org.springframework.security.web.access.ExceptionTranslationFilter@38b06a79, org.springframework.security.web.access.intercept.AuthorizationFilter@7d3af2f0]
    2025-12-26T09:58:52.420+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.MagazineApplicationTests   : Started MagazineApplicationTests in 4.523 seconds (process running for 24.208)

MagazineApplicationTests > contextLoads() PASSED

ContentApiTest STANDARD_OUT
    2025-12-26T09:58:52.510+09:00  INFO 19484 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.kz.magazine.controller.ContentApiTest]: ContentApiTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    2025-12-26T09:58:52.561+09:00  INFO 19484 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.controller.ContentApiTest

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:58:52.627+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.controller.ContentApiTest  : Starting ContentApiTest using Java 17.0.13 with PID 19484 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:58:52.627+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.controller.ContentApiTest  : No active profile set, falling back to 1 default profile: "default"
    2025-12-26T09:58:54.913+09:00  WARN 19484 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : 

    Using generated security password: 2ed523d2-e362-4f05-bf63-cdd2d2c642fa

    This generated password is for development use only. Your security configuration must be updated before running your application in production.

    2025-12-26T09:58:54.998+09:00  INFO 19484 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6fb03f5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1355d2a0, org.springframework.security.web.context.SecurityContextHolderFilter@3ce7a0d1, org.springframework.security.web.header.HeaderWriterFilter@3ed3bfcb, org.springframework.web.filter.CorsFilter@bfab0dc, org.springframework.security.web.csrf.CsrfFilter@640b5373, org.springframework.security.web.authentication.logout.LogoutFilter@2d7d92a7, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@69c071db, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@30e67f98, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@469c1292, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3baed0a9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2c9ecf5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1368a7d9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@18a6451f, org.springframework.security.web.access.ExceptionTranslationFilter@51680b0e, org.springframework.security.web.access.intercept.AuthorizationFilter@3dbe3bc4]
    2025-12-26T09:58:55.046+09:00  INFO 19484 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
    2025-12-26T09:58:55.046+09:00  INFO 19484 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
    2025-12-26T09:58:55.054+09:00  INFO 19484 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 7 ms
    2025-12-26T09:58:55.085+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.controller.ContentApiTest  : Started ContentApiTest in 2.511 seconds (process running for 26.873)

ContentApiTest > Get Contents List - Success STANDARD_OUT
    2025-12-26T09:58:55.430+09:00  WARN 19484 --- [    Test worker] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/contents' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.

ContentApiTest > Get Contents List - Success PASSED

ContentApiTest > Get Content Detail - Success PASSED

ContentApiTest > Delete Content - Success PASSED

ContentApiTest > Create Content - Success PASSED

ContentApiTest > Update Content - Success PASSED

FileApiTest STANDARD_OUT
    2025-12-26T09:58:56.313+09:00  INFO 19484 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.kz.magazine.controller.FileApiTest]: FileApiTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    2025-12-26T09:58:56.344+09:00  INFO 19484 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.controller.FileApiTest

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:58:56.413+09:00  INFO 19484 --- [    Test worker] com.kz.magazine.controller.FileApiTest   : Starting FileApiTest using Java 17.0.13 with PID 19484 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:58:56.414+09:00  INFO 19484 --- [    Test worker] com.kz.magazine.controller.FileApiTest   : No active profile set, falling back to 1 default profile: "default"
    2025-12-26T09:58:57.297+09:00  WARN 19484 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : 

    Using generated security password: 4ac69c7b-5784-483b-adc4-955eae286523

    This generated password is for development use only. Your security configuration must be updated before running your application in production.

    2025-12-26T09:58:57.316+09:00  INFO 19484 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@57cd757a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2ad447d8, org.springframework.security.web.context.SecurityContextHolderFilter@3447c3ed, org.springframework.security.web.header.HeaderWriterFilter@2c630bff, org.springframework.web.filter.CorsFilter@147c3a88, org.springframework.security.web.csrf.CsrfFilter@521090f1, org.springframework.security.web.authentication.logout.LogoutFilter@1dde2d1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@34615ef4, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5b8de87b, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@47c8ced, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@26b6c4de, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@62065a8c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6f053a97, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@38a64fbd, org.springframework.security.web.access.ExceptionTranslationFilter@54db2ab9, org.springframework.security.web.access.intercept.AuthorizationFilter@5ac4f417]
    2025-12-26T09:58:57.331+09:00  INFO 19484 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
    2025-12-26T09:58:57.331+09:00  INFO 19484 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
    2025-12-26T09:58:57.332+09:00  INFO 19484 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
    2025-12-26T09:58:57.343+09:00  INFO 19484 --- [    Test worker] com.kz.magazine.controller.FileApiTest   : Started FileApiTest in 0.99 seconds (process running for 29.13)

FileApiTest > Upload File - Success STANDARD_OUT
    2025-12-26T09:58:57.363+09:00  WARN 19484 --- [    Test worker] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/files/upload' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.

FileApiTest > Upload File - Success PASSED

RepositoryTest STANDARD_OUT
    2025-12-26T09:58:57.395+09:00  INFO 19484 --- [    Test worker] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.kz.magazine.repository.RepositoryTest]: RepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
    2025-12-26T09:58:57.474+09:00  INFO 19484 --- [    Test worker] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.kz.magazine.MagazineApplication for test class com.kz.magazine.repository.RepositoryTest

      .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::                (v3.2.0)

    2025-12-26T09:58:57.565+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.repository.RepositoryTest  : Starting RepositoryTest using Java 17.0.13 with PID 19484 (started by hereisjeju in D:\berodu\SORIN\project\Newsletter\backend)
    2025-12-26T09:58:57.565+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.repository.RepositoryTest  : No active profile set, falling back to 1 default profile: "default"
    2025-12-26T09:58:58.384+09:00  INFO 19484 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
    2025-12-26T09:58:58.451+09:00  INFO 19484 --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 10 JPA repository interfaces.
    2025-12-26T09:58:58.773+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
    2025-12-26T09:58:59.484+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@22db47ef
    2025-12-26T09:58:59.484+09:00  INFO 19484 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
    2025-12-26T09:58:59.591+09:00  INFO 19484 --- [    Test worker] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/kz_magazine (PostgreSQL 15.15)
    2025-12-26T09:59:00.211+09:00  INFO 19484 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 6
    2025-12-26T09:59:00.259+09:00  INFO 19484 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Schema "public" is up to date. No migration necessary.
    2025-12-26T09:59:00.401+09:00  INFO 19484 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
    2025-12-26T09:59:00.409+09:00  INFO 19484 --- [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
    2025-12-26T09:59:00.417+09:00  INFO 19484 --- [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
    2025-12-26T09:59:01.002+09:00  INFO 19484 --- [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
    2025-12-26T09:59:01.002+09:00  INFO 19484 --- [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
    2025-12-26T09:59:01.534+09:00  INFO 19484 --- [    Test worker] c.kz.magazine.repository.RepositoryTest  : Started RepositoryTest in 4.045 seconds (process running for 33.321)

RepositoryTest > Content Repository Mapping Test STANDARD_OUT
    2025-12-26T09:59:01.595+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            c1_0.category_id,
            c1_0.category_name,
            c1_0.created_at,
            c1_0.created_by,
            c1_0.display_order,
            c1_0.is_active,
            c1_0.updated_at,
            c1_0.updated_by 
        from
            categories c1_0 
        where
            c1_0.category_name=?
    Hibernate: 
        select
            c1_0.category_id,
            c1_0.category_name,
            c1_0.created_at,
            c1_0.created_by,
            c1_0.display_order,
            c1_0.is_active,
            c1_0.updated_at,
            c1_0.updated_by 
        from
            categories c1_0 
        where
            c1_0.category_name=?
    2025-12-26T09:59:01.637+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        select
            u1_0.user_id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.department,
            u1_0.email,
            u1_0.is_active,
            u1_0.name,
            u1_0.role,
            u1_0.updated_at,
            u1_0.updated_by,
            u1_0.username 
        from
            users u1_0 
        where
            u1_0.username=?
    Hibernate: 
        select
            u1_0.user_id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.department,
            u1_0.email,
            u1_0.is_active,
            u1_0.name,
            u1_0.role,
            u1_0.updated_at,
            u1_0.updated_by,
            u1_0.username 
        from
            users u1_0 
        where
            u1_0.username=?
    2025-12-26T09:59:01.673+09:00 DEBUG 19484 --- [    Test worker] org.hibernate.SQL                        : 
        insert 
        into
            contents
            (author_id, average_rating, body_html, body_text, category_id, created_at, deleted_at, deleted_by, instagram_url, published_at, rating_count, rating_sum, status, summary, thumbnail_file_id, title, updated_at, view_count, youtube_url) 
        values
            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    Hibernate: 
        insert 
        into
            contents
            (author_id, average_rating, body_html, body_text, category_id, created_at, deleted_at, deleted_by, instagram_url, published_at, rating_count, rating_sum, status, summary, thumbnail_file_id, title, updated_at, view_count, youtube_url) 
        values
            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)

RepositoryTest > Content Repository Mapping Test PASSED

AuditLogServiceTest > logAction_Success() PASSED

ContentViewServiceTest > incrementViewCount_Deduped() PASSED

ContentViewServiceTest > incrementViewCount_Success() PASSED

EventServiceTest > Draw winners should select random participants PASSED

EventServiceTest > Duplicate participation should fail PASSED

ReactionServiceTest > toggleLike_AddLike() PASSED

ReactionServiceTest > toggleLike_RemoveLike() PASSED

HtmlSanitizerTest > Should allow valid links but enforce nofollow PASSED

HtmlSanitizerTest > Should remove script tags PASSED

HtmlSanitizerTest > Should allow safe tags and attributes PASSED

HtmlSanitizerTest > Should allow Youtube iframe PASSED

2025-12-26T09:59:03.799+09:00  INFO 19484 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T09:59:03.802+09:00  INFO 19484 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-26T09:59:03.911+09:00  INFO 19484 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-26T09:59:03.916+09:00  INFO 19484 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T09:59:03.917+09:00  INFO 19484 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-12-26T09:59:04.045+09:00  INFO 19484 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-12-26T09:59:04.049+09:00  INFO 19484 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T09:59:04.052+09:00  INFO 19484 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-12-26T09:59:04.137+09:00  INFO 19484 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.

> Task :test FAILED

22 tests completed, 3 failed

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':test'.
> There were failing tests. See the report at: file:///D:/berodu/SORIN/project/Newsletter/backend/build/reports/tests/test/index.html

* Try:
> Run with --scan to get full insights.

Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.

You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.

For more on this, please refer to https://docs.gradle.org/8.5/userguide/command_line_interface.html#sec:command_line_warnings in the Gradle documentation.

BUILD FAILED in 42s
4 actionable tasks: 3 executed, 1 up-to-date
